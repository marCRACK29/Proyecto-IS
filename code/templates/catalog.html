<!DOCTYPE html>

<html>
	<head>
		<meta charset = "UTF-8">
		<title> Grafico de Medicos </title>
		
		<link rel = "stylesheet" href = "{{ url_for('static', filename='style.css') }}">
		<link rel = "stylesheet" href = "https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
		
		<script src = "https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src = "https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
	</head>
	
	<body>
		<h1> Catálogo de Médicos </h1>
		<table id = "catalog" class = "display">
			<thead>
				<tr>
					<th> Nombre </th>
					<th> Especialidad </th>
				</tr>
			</thead>
			
			<tbody>
			</tbody>
		</table>
		
		<script>
			async function fetchMedics() {
				const rawData = await fetch('/api/medics');
				const medicData = await rawData.json();
				$('#catalog').DataTable({
					data: medicData,
					columns: [
						{
							data: 'name',
							render: function(data) {
								return `<a href="/medic/${data}">${data}</a>`;
							}
						},
						{ data: 'speciality' }
					],
				});
			}

			fetchMedics();
		</script>
	</body>
</html>